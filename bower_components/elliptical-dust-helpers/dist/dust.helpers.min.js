!function(e,r){"function"==typeof define&&define.amd&&define.amd.dust===!0?define(["dust.core"],r):"object"==typeof exports?module.exports=r(require("dustjs-linkedin")):r(e.dust)}(this,function(e){function r(r,t,n){n=n||"INFO",r=r?"{@"+r+"}: ":"",e.log(r+t,n)}function t(e){p[e]||(r(e,"Deprecation warning: "+e+" is deprecated and will be removed in a future version of dustjs-helpers","WARN"),r(null,"For help and a deprecation timeline, see https://github.com/linkedin/dustjs-helpers/wiki/Deprecated-Features#"+e.replace(/\W+/g,""),"WARN"),p[e]=!0)}function n(e){return e.stack.tail&&e.stack.tail.head&&"undefined"!=typeof e.stack.tail.head.__select__}function a(e){return n(e)&&e.get("__select__")}function i(e,r){var t,n=e.stack.head,a=e.rebase();e.stack&&e.stack.tail&&(a.stack=e.stack.tail);var i={isPending:!1,isResolved:!1,isDeferredComplete:!1,deferreds:[]};for(t in r)i[t]=r[t];return a.push({__select__:i}).push(n,e.stack.index,e.stack.of)}function s(e){var r,t;if(e.isDeferredPending=!0,e.deferreds.length)for(e.isDeferredComplete=!0,r=0,t=e.deferreds.length;t>r;r++)e.deferreds[r]();e.isDeferredPending=!1}function o(e,r){return"function"==typeof r?r.toString().replace(/(^\s+|\s+$)/gm,"").replace(/\n/gm,"").replace(/,\s*/gm,", ").replace(/\)\{/gm,") {"):r}function l(e,r){return function(t,n,a,i){return u(t,n,a,i,e,r)}}function u(e,t,n,i,s,o){var l,u,p,d,f=n.block,h=n["else"],v=a(t)||{};if(v.isResolved&&!v.isDeferredPending)return e;if(i.hasOwnProperty("key"))u=i.key;else{if(!v.hasOwnProperty("key"))return r(s,"No key specified","WARN"),e;u=v.key}return d=i.type||v.type,u=c(t.resolve(u),d),p=c(t.resolve(i.value),d),o(u,p)?(v.isPending||(l=!0,v.isPending=!0),f&&(e=e.render(f,t)),l&&(v.isResolved=!0)):h&&(e=e.render(h,t)),e}function c(e,r){switch(r&&(r=r.toLowerCase()),r){case"number":return+e;case"string":return String(e);case"boolean":return e="false"===e?!1:e,Boolean(e);case"date":return new Date(e)}return e}var p={},d={tap:function(e,r,n){return t("tap"),n.resolve(e)},sep:function(e,r,t){var n=t.block;return r.stack.index===r.stack.of-1?e:n?n(e,r):e},first:function(e,r,t){return 0===r.stack.index?t.block(e,r):e},last:function(e,r,t){return r.stack.index===r.stack.of-1?t.block(e,r):e},contextDump:function(e,t,n,a){var i,s,l=t.resolve(a.to),u=t.resolve(a.key);switch(u){case"full":i=t.stack;break;default:i=t.stack.head}switch(s=JSON.stringify(i,o,2),l){case"console":r("contextDump",s);break;default:s=s.replace(/</g,"\\u003c"),e=e.write(s)}return e},math:function(e,t,n,o){var l,u=o.key,c=o.method,p=o.operand,d=o.round;if(!o.hasOwnProperty("key")||!o.method)return r("math","`key` or `method` was not provided","ERROR"),e;switch(u=parseFloat(t.resolve(u)),p=parseFloat(t.resolve(p)),c){case"mod":0===p&&r("math","Division by 0","ERROR"),l=u%p;break;case"add":l=u+p;break;case"subtract":l=u-p;break;case"multiply":l=u*p;break;case"divide":0===p&&r("math","Division by 0","ERROR"),l=u/p;break;case"ceil":case"floor":case"round":case"abs":l=Math[c](u);break;case"toint":l=parseInt(u,10);break;default:r("math","Method `"+c+"` is not supported","ERROR")}return"undefined"!=typeof l&&(d&&(l=Math.round(l)),n&&n.block?(t=i(t,{key:l}),e=e.render(n.block,t),s(a(t))):e=e.write(l)),e},select:function(e,t,n,o){var l=n.block,u={};return o.hasOwnProperty("key")&&(u.key=t.resolve(o.key)),o.hasOwnProperty("type")&&(u.type=o.type),l?(t=i(t,u),e=e.render(l,t),s(a(t))):r("select","Missing body block","WARN"),e},eq:l("eq",function(e,r){return e===r}),ne:l("ne",function(e,r){return e!==r}),lt:l("lt",function(e,r){return r>e}),lte:l("lte",function(e,r){return r>=e}),gt:l("gt",function(e,r){return e>r}),gte:l("gte",function(e,r){return e>=r}),any:function(e,t,n,i){var s=a(t);return s?s.isDeferredComplete?r("any","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){s.deferreds.push(function(){s.isResolved&&(e=e.render(n.block,t)),e.end()})}):r("any","Must be used inside a {@select} block","ERROR"),e},none:function(e,t,n,i){var s=a(t);return s?s.isDeferredComplete?r("none","Must not be nested inside {@any} or {@none} block","ERROR"):e=e.map(function(e){s.deferreds.push(function(){s.isResolved||(e=e.render(n.block,t)),e.end()})}):r("none","Must be used inside a {@select} block","ERROR"),e},size:function(r,t,n,a){var i,s,o=a.key;if(o=t.resolve(a.key),o&&o!==!0)if(e.isArray(o))i=o.length;else if(!isNaN(parseFloat(o))&&isFinite(o))i=o;else if("object"==typeof o){i=0;for(s in o)o.hasOwnProperty(s)&&i++}else i=(o+"").length;else i=0;return r.write(i)}};for(var f in d)e.helpers[f]=d[f];return e}),function(e,r){"undefined"!=typeof module&&module.exports?module.exports=r(require("dustjs"),require("dustjs-helpers"),require("moment"),require("elliptical-utils")):"function"==typeof define&&define.amd?define(["dustjs","dustjs-helpers","moment","elliptical-utils"],r):e.returnExports=r(e.dust,e.dust.helpers,e.moment,e.elliptical.utils)}(this,function(e,r,t,n){var a=n.string,i=n.url,s=n.random;return e.helpers.formatCurrency=function(r,t,a,i){var s,o=e.helpers.tap(i.value,r,t);try{n.isNumeric(o)?(o=parseFloat(o),s=o.toFixed(2)):s=""}catch(l){s=""}return r.write(s)},e.helpers.extFormatCurrency=function(r,t,a,i){var s,o=e.helpers.tap(i.value,r,t);try{n.isNumeric(o)?(o=parseFloat(o),s=o.toFixed(2),s="$"+s.toString()):s=""}catch(l){s=""}return r.write(s)},e.helpers.formatDate=function(r,n,a,i){var s=e.helpers.tap(i.value,r,n),o=i.format||"MM-DD-YYYY";return s=s?t(s).format(o):"",r.write(s)},e.helpers.placeholder=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s=e.helpers.tap(a.defaultValue,r,t);return i?r.write(i):r.write(s)},e.helpers.phraseCase=function(r,t,n,i){var s=e.helpers.tap(i.value,r,t);return s=a.camelCaseToSpace(s),r.write(s)},e.helpers.checked=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s="";return i&&(s="checked"),r.write(s)},e.helpers.radio=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s=e.helpers.tap(a.key,r,t),o="";try{i&&i.toLowerCase()===s.toLowerCase()&&(o="checked")}catch(l){}return r.write(o)},e.helpers.selected=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s=e.helpers.tap(a.key,r,t),o="";try{i&&i.toLowerCase()===s.toLowerCase()&&(o="selected")}catch(l){}return r.write(o)},e.helpers.truthy=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s=e.helpers.tap(a["true"],r,t),o=e.helpers.tap(a["false"],r,t),l=i?s:o;return r.write(l)},e.helpers.hide=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s="";return i&&(s="hide"),r.write(s)},e.helpers.disable=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s="";return i&&(s="disabled"),r.write(s)},e.helpers.readonly=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s="";return i&&(s="readonly"),r.write(s)},e.helpers.position=function(e,r,t){var n=r.stack.index+1;return e.write(n)},e.helpers.index=function(e,r,t){var n=r.stack.index;return e.write(n)},e.helpers.urlEncode=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t);return i?(console.log(i),i=encodeURIComponent(i)):i="",r.write(i)},e.helpers.toggle=function(r,t,n,a){var i="",s=e.helpers.tap(a.value,r,t),o=e.helpers.tap(a.on,r,t),l=e.helpers.tap(a.onCSS,r,t),u=e.helpers.tap(a.offCSS,r,t);return i=s===o?l:u,r.write(i)},e.helpers.compare=function(r,t,n,a){var i="",s=e.helpers.tap(a.value,r,t),o=e.helpers.tap(a.test,r,t),l=e.helpers.tap(a.echo,r,t);return s===o&&(i=l),r.write(i)},e.helpers.inArray=function(r,t,n,a){var i,s,o,l=e.helpers.tap(a.index,r,t),u=e.helpers.tap(a.array,r,t),c=e.helpers.tap(a.obj,r,t),p=e.helpers.tap(a.id,r,t),d=t.stack.tail.head;i=d,s=i[u],o="undefined"==typeof l?i[c]:i[c][l];var f="";return s&&s.length&&s.forEach(function(e){o[p]===e[p]&&(f="checked")}),r.write(f)},e.helpers.url=function(r,t,n,a){var s=e.helpers.tap(a.href,r,t),o=e.helpers.tap(a.encodeURIIndex,r,t);o&&(s=i.encodeURISection(s,parseInt(o))),"undefined"!=typeof window&&window.elliptical.$hashTag&&"#"!==s.charAt(1)&&(s="/#"+s);var l="undefined"==typeof window?global:window,u=l.elliptical.$virtualRoot;"/"!==u&&(s=u+s);var c='href="'+s+'"';return r.write(c)},e.helpers.pluralize=function(r,t,n,a){var i=e.helpers.tap(a.count,r,t),s=e.helpers.tap(a.singular,r,t),o=e.helpers.tap(a.plural,r,t),l=1===i?s:o;return r.write(l)},e.helpers.id=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t);return void 0===i&&(i=s.id()),r.write(i)},e.helpers.guid=function(r,t,a,i){var o=e.helpers.tap(i.value,r,t);return(void 0===o||""===o)&&(o=s.guid()),r.write(n.guid())},e.helpers.location=function(e,r,t,n){var a=location.href;return e.write(a)},e.helpers.formatSku=function(r,t,n,a){var i=e.helpers.tap(a.value,r,t),s=i.substring(5);return r.write(s)},e.helpers.inline={},e.helpers.inline.formatDate=function(e,r){return r=r||"MM-DD-YYYY",e?t(e).format(r):""},e.helpers.inline.formatCurrency=function(e){e=parseFloat(e);var r;try{r=n.isNumeric(e)?e.toFixed(2):""}catch(t){r=""}return r},e.helpers.inline.extFormatCurrency=function(e){e=parseFloat(e);var r;return n.isNumeric(e)?(r=e.toFixed(2),r="$"+r.toString()):r="",r},e});